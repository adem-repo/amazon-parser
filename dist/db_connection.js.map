{"version":3,"file":"db_connection.js","sourceRoot":"","sources":["../src/db_connection.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAM,WAAW,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC;AAEnD,IAAM,GAAG,GAAG,4BAA4B,CAAC;AACzC,IAAM,WAAW,GAAG,IAAI,WAAW,CAAC,GAAG,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;AACpE,IAAM,MAAM,GAAG,cAAc,CAAC;AAC9B,IAAM,cAAc,GAAG,0BAAwB,IAAI,IAAI,EAAI,CAAC;AAE5D,IAAI,gBAAgB,EAAE,UAAU,CAAC;AAEjC,SAAgB,SAAS;IAAzB,iBAOC;IANC,WAAW,CAAC,OAAO,CAAE,UAAO,GAAG,EAAE,MAAM;;;;wBAC1B,WAAM,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAA;;oBAA5B,EAAE,GAAG,SAAuB;oBAClC,WAAM,EAAE,CAAC,gBAAgB,CAAC,cAAc,CAAC,EAAA;;oBAAzC,SAAyC,CAAC;oBAC7B,WAAM,EAAE,CAAC,UAAU,CAAC,cAAc,CAAC,EAAA;;oBAAhD,UAAU,GAAG,SAAmC,CAAC;oBACjD,gBAAgB,GAAG,MAAM,CAAC;;;;SAC3B,CAAC,CAAC;AACL,CAAC;AAPD,8BAOC;AAED,SAAgB,YAAY;IAC1B,gBAAgB,CAAC,KAAK,EAAE,CAAC;AAC3B,CAAC;AAFD,oCAEC;AAED,SAAgB,WAAW,CAAC,IAAI;IAC9B,UAAU,CAAC,SAAS,CAAC,IAAI,EAAE,UAAS,GAAG,EAAE,MAAM;QAC7C,IAAI,GAAG;YACL,OAAO,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC5B,CAAC,CAAC,CAAC;AACL,CAAC;AALD,kCAKC","sourcesContent":["const MongoClient = require(\"mongodb\").MongoClient;\n\nconst url = \"mongodb://localhost:27017/\";\nconst mongoClient = new MongoClient(url, { useNewUrlParser: true });\nconst dbName = 'amazon_books';\nconst collectionName = `category_books_ranks_${new Date()}`;\n\nlet clientDescriptor, collection;\n\nexport function dbConnect() {\n  mongoClient.connect( async (err, client) => {\n    const db = await client.db(dbName);\n    await db.createCollection(collectionName);\n    collection = await db.collection(collectionName);\n    clientDescriptor = client;\n  });\n}\n\nexport function dbDisconnect() {\n  clientDescriptor.close();\n}\n\nexport function addDocument(data) {\n  collection.insertOne(data, function(err, result){\n    if (err)\n      return console.log(err);\n  });\n}\n\n"]}